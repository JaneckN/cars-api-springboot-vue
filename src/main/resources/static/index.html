<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cars App</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>

<div class="image">
    <div class="app" id="cars-app">
        <div class="container">
            <h3>Cars:</h3>
            <table class="table">
                <thead class="thead-dark">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Mark</th>
                    <th scope="col">Model</th>
                    <th scope="col">Year</th>
                    <th scope="col">Color</th>
                    <th scope="col">Action</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="car in cars" v-bind:key="car.id">
                    <th scope="row">{{ car.id }}</th>
                    <td>{{ car.mark }}</td>
                    <td>{{ car.model }}</td>
                    <td>{{ car.year }}</td>
                    <td>{{ car.color }}</td>
                    <td>
                        <button class="btn btn-primary" v-on:click="setCarForEdit(car)">Edit</button>
                        <button class="btn btn-danger" v-on:click.prevent="deleteCar(car.id)">Delete</button>
                    </td>

                </tr>
                </tbody>
            </table>
        </div>
        <div class="car_form">
            <!--    ADD-->
            <div v-if="!isEditing" class="container p-3 my-3 bg-dark text-white">
                <form v-on:submit.prevent="postCar" class="car_input">
                    <div class="form-group">
                        <input v-model="car.id" type="text" class="form-control" placeholder="Enter Car Id" required>
                    </div>
                    <div class="form-group">
                        <input v-model="car.mark" type="text" class="form-control" placeholder="Enter Car Mark"
                               required>
                    </div>
                    <div class="form-group">
                        <input v-model="car.model" type="text" class="form-control" placeholder="Enter Car model"
                               required>
                    </div>
                    <div class="form-group">
                        <input v-model="car.year" type="text" class="form-control" placeholder="Enter Car year"
                               required>
                    </div>
                    <div class="form-group">
                        <select v-model="car.color" class="custom-select" required>
                            <option disabled value="null">Please select one</option>
                            <option v-for="color in colors" v-bind:key="color.valueOf()">{{ color.valueOf() }}</option>
                        </select>
                    </div>
                    <div class="submit">
                        <input class="btn btn-primary" type="submit" value="ADD Car">
                    </div>
                </form>
            </div>

            <!--    EDIT-->
            <div v-else-if="isEditing" class="container p-3 my-3 bg-dark text-white">
                <form v-on:submit.prevent="editCar" class="car_input">
                    <div class="form-group">
                        <input v-model="car.id" type="text" class="form-control" disabled="disabled" size="16">
                    </div>
                    <div class="form-group">
                        <input v-model="car.mark" type="text" class="form-control">
                    </div>
                    <div class="form-group">
                        <input v-model="car.model" type="text" class="form-control">
                    </div>
                    <div class="form-group">
                        <input v-model="car.year" type="text" class="form-control">
                    </div>
                    <div class="form-group">
                        <select v-model="car.color" class="custom-select">
                            <option v-for="color in colors" v-bind:key="color">{{ color.valueOf() }}</option>
                        </select>
                    </div>
                    <div class="submit">
                        <input class="btn btn-primary" type="submit" value="SAVE">
                    </div>
                    <div>
                        <button class="btn btn-danger" v-on:click="exitEditMode">Cancel</button>
                    </div>
                </form>
            </div>

            <!--    Filtering-->
            <div>
                <form v-on:submit.prevent="getCarsByYears" class="car_input">
                    <div class="form-group">
                        <input v-model="yearFrom" type="number" min="1950" max="2020" class="form-control"
                               placeholder="Year From" required>
                    </div>
                    <div class="form-group">
                        <input v-model="yearTo" type="number" min="1950" max="2020" class="form-control"
                               placeholder="Year To" required>
                    </div>
                    <div class="submit">
                        <input class="btn btn-primary" type="submit" value="Filter">
                    </div>
                    <div>
                        <button v-if="isFiltering" class="btn btn-danger" v-on:click="exitFiltering">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>


<script>
    var _0x4928 = ["\x68\x74\x74\x70\x73\x3A\x2F\x2F\x63\x61\x72\x73\x61\x70\x70\x2D\x73\x70\x72\x69\x6E\x67\x62\x6F\x6F\x74\x2D\x76\x75\x65\x2E\x68\x65\x72\x6F\x6B\x75\x61\x70\x70\x2E\x63\x6F\x6D\x2F\x76\x32\x2F\x63\x61\x72\x73\x2F", "\x23\x63\x61\x72\x73\x2D\x61\x70\x70", "\x67\x65\x74\x43\x61\x72\x73", "\x67\x65\x74\x43\x6F\x6C\x6F\x72\x73", "\x63\x61\x72\x73", "\x64\x61\x74\x61", "\x74\x68\x65\x6E", "\x67\x65\x74", "\x69\x73\x46\x69\x6C\x74\x65\x72\x69\x6E\x67", "\x2F\x79\x65\x61\x72\x73\x3F\x79\x65\x61\x72\x46\x72\x6F\x6D\x3D", "\x79\x65\x61\x72\x46\x72\x6F\x6D", "\x26\x79\x65\x61\x72\x54\x6F\x3D", "\x79\x65\x61\x72\x54\x6F", "\x6C\x6F\x67", "\x64\x65\x6C\x65\x74\x65", "\x63\x6F\x6C\x6F\x72\x73", "\x2F\x67\x65\x74\x43\x6F\x6C\x6F\x72\x73", "\x69\x64", "\x63\x61\x72", "\x6D\x61\x72\x6B", "\x6D\x6F\x64\x65\x6C", "\x79\x65\x61\x72", "\x63\x6F\x6C\x6F\x72", "\x70\x6F\x73\x74", "\x69\x73\x45\x64\x69\x74\x69\x6E\x67", "\x70\x75\x74"];
    const apiURL = _0x4928[0];
    new Vue({
        el: _0x4928[1], data: function () {
            return {
                cars: null,
                colors: null,
                isEditing: false,
                isFiltering: false,
                yearFrom: null,
                yearTo: null,
                car: {id: null, mark: null, model: null, year: null, color: null}
            }
        }, mounted: function () {
            this[_0x4928[2]]();
            this[_0x4928[3]]()
        }, methods: {
            getCars: function () {
                axios[_0x4928[7]](apiURL)[_0x4928[6]]((_0x4225x2) => {
                    this[_0x4928[4]] = _0x4225x2[_0x4928[5]]
                })
            }, getCarsByYears: function () {
                axios[_0x4928[7]](apiURL + _0x4928[9] + this[_0x4928[10]] + _0x4928[11] + this[_0x4928[12]])[_0x4928[6]]((_0x4225x2) => {
                    this[_0x4928[4]] = _0x4225x2[_0x4928[5]];
                    this[_0x4928[8]] = true
                })
            }, deleteCar: function (_0x4225x3) {
                axios[_0x4928[14]](apiURL + _0x4225x3)[_0x4928[6]]((_0x4225x2) => {
                    console[_0x4928[13]](_0x4225x2[_0x4928[5]]);
                    this[_0x4928[2]]()
                })
            }, getColors: function () {
                axios[_0x4928[7]](apiURL + _0x4928[16])[_0x4928[6]]((_0x4225x2) => {
                    this[_0x4928[15]] = _0x4225x2[_0x4928[5]].valueOf()
                })
            }, postCar: function () {
                axios[_0x4928[23]](apiURL, {
                    "\x69\x64": this[_0x4928[18]][_0x4928[17]],
                    "\x6D\x61\x72\x6B": this[_0x4928[18]][_0x4928[19]],
                    "\x6D\x6F\x64\x65\x6C": this[_0x4928[18]][_0x4928[20]],
                    "\x79\x65\x61\x72": this[_0x4928[18]][_0x4928[21]],
                    "\x63\x6F\x6C\x6F\x72": this[_0x4928[18]][_0x4928[22]]
                })[_0x4928[6]]((_0x4225x2) => {
                    console[_0x4928[13]](_0x4225x2[_0x4928[5]]);
                    this[_0x4928[2]]();
                    this[_0x4928[18]][_0x4928[17]] = null;
                    this[_0x4928[18]][_0x4928[19]] = null;
                    this[_0x4928[18]][_0x4928[20]] = null;
                    this[_0x4928[18]][_0x4928[21]] = null;
                    this[_0x4928[18]][_0x4928[22]] = null
                })
            }, setCarForEdit: function (_0x4225x4) {
                this[_0x4928[24]] = true;
                this[_0x4928[18]] = _0x4225x4
            }, exitEditMode: function () {
                this[_0x4928[24]] = false;
                this[_0x4928[18]][_0x4928[17]] = null;
                this[_0x4928[18]][_0x4928[19]] = null;
                this[_0x4928[18]][_0x4928[20]] = null;
                this[_0x4928[18]][_0x4928[21]] = null;
                this[_0x4928[18]][_0x4928[22]] = null;
                this[_0x4928[2]]()
            }, exitFiltering: function () {
                this[_0x4928[8]] = false;
                this[_0x4928[12]] = null;
                this[_0x4928[10]] = null;
                this[_0x4928[2]]()
            }, editCar: function () {
                axios[_0x4928[25]](apiURL, {
                    "\x69\x64": this[_0x4928[18]][_0x4928[17]],
                    "\x6D\x61\x72\x6B": this[_0x4928[18]][_0x4928[19]],
                    "\x6D\x6F\x64\x65\x6C": this[_0x4928[18]][_0x4928[20]],
                    "\x79\x65\x61\x72": this[_0x4928[18]][_0x4928[21]],
                    "\x63\x6F\x6C\x6F\x72": this[_0x4928[18]][_0x4928[22]]
                })[_0x4928[6]]((_0x4225x2) => {
                    console[_0x4928[13]](_0x4225x2[_0x4928[5]]);
                    this[_0x4928[2]]();
                    this[_0x4928[18]][_0x4928[17]] = null;
                    this[_0x4928[18]][_0x4928[19]] = null;
                    this[_0x4928[18]][_0x4928[20]] = null;
                    this[_0x4928[18]][_0x4928[21]] = null;
                    this[_0x4928[18]][_0x4928[22]] = null;
                    this[_0x4928[24]] = false
                })
            }
        }
    })
</script>


<style>
    .app {
        font-family: Avenir, Helvetica, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-align: center;
        color: #2c3e50;
    }

    .image {
        background-image: linear-gradient(rgba(255, 255, 255, 0.0), rgba(255, 255, 255, 1.0)), url("https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxleHBsb3JlLWZlZWR8MXx8fGVufDB8fHw%3D&w=1000&q=80");
        background-color: #cccccc;
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
    }

    h3 {
        margin-bottom: 5%;
    }


    .btn-primary,
    .btn-danger {
        align-items: center;
        margin-left: 2%;
        margin-right: 2%;
    }

    .form-group {
        margin: 3px;
        width: auto;
    }

    .btn-danger {
        margin-left: 3px;
        margin-right: 3px;
    }


    .car_form {
        width: 95%;
        display: flex;
        box-sizing: border-box;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .car_input {
        width: 95%;
        display: flex;
        box-sizing: border-box;
        flex-direction: row;
    }



    @media screen and (max-width: 1000px) {
        .car_input {
            flex-wrap: wrap;
            align-items: center
        }
    }
</style>